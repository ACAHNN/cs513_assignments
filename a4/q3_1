A=[309,228,-240;60,-117,510;12,6,298]/49;
v=[6 3 2]';
v=v/norm(v);
l1=(A*v)./v;
l1=l1(1);
v1=v;
e=[1 0 0]';
w=e-v;
w=w/norm(w)

w =

    0.2673
   -0.8018
   -0.5345

H=eye(3)-2*w*w'

H =

    0.8571    0.4286    0.2857
    0.4286   -0.2857   -0.8571
    0.2857   -0.8571    0.4286

A1=H*A*H

A1 =

    7.0000   -0.0000    0.0000
   -0.0000    9.0000   -6.0000
   -0.0000    6.0000   -6.0000

tilA1=A1(2:end,2:end)

tilA1 =

    9.0000   -6.0000
    6.0000   -6.0000

[V,E]=eig(tilA1)

V =

    0.8944    0.4472
    0.4472    0.8944


E =

    6.0000         0
         0   -3.0000

l2=E(1,1)

l2 =

    6.0000

l3=E(2,2)

l3 =

   -3.0000

v2=V(:,1)

v2 =

    0.8944
    0.4472

v3=V(:,2)

v3 =

    0.4472
    0.8944

x=A1(1,2:end)

x =

   1.0e-14 *

   -0.1998    0.2442

a=dot(x,v2)/(l2-l1)

a =

   6.9511e-16

v2=[a; v2]

v2 =

    0.0000
    0.8944
    0.4472

v2 = H*v2

v2 =

    0.5111
   -0.6389
   -0.5750

a=dot(x,v3)/(l3-l1)

a =

  -1.2909e-16

v3 = [a; v3]

v3 =

   -0.0000
    0.4472
    0.8944

v3 = H*v3

v3 =

    0.4472
   -0.8944
   -0.0000

P=[v1 v2 v3]

P =

    0.8571    0.5111    0.4472
    0.4286   -0.6389   -0.8944
    0.2857   -0.5750   -0.0000

D=diag([l1 l2 l3])

D =

    7.0000         0         0
         0    6.0000         0
         0         0   -3.0000

P*D*inv(P)

ans =

    6.3061    4.6531   -4.8980
    1.2245   -2.3878   10.4082
    0.2449    0.1224    6.0816

A

A =

    6.3061    4.6531   -4.8980
    1.2245   -2.3878   10.4082
    0.2449    0.1224    6.0816

% A = P*D*inv(D) [check]
diary off
