% Part A
X={};
X{1}=eye(4);
X{1}(1,1)=2;
X{2}=eye(4);
X{2}(3,3)=.5;
X{3}=eye(4);
X{3}(1,3)=1;
X{4}=eye(4);
X{4}(1,1)=0;
X{4}(4,1)=1;
X{4}(4,4)=0;
X{4}(1,4)=1;
X{5}=eye(4);
X{5}(1,2)=-1;
X{5}(3:4,2)=-1;
X{6}=eye(4);
X{6}(4,4)=0;
X{6}(3,4)=1;
X{7}=eye(4);
X{7}=X{7}(:,2:end);

B=rand(4);
ANS1=X{5}*X{3}*X{2}*B*X{1}*X{4}*X{6}*X{7};

% Part B
A=X{5}*X{3}*X{2};
C=X{1}*X{4}*X{6}*X{7};
ANS2=A*B*C;

% Check equivalence
isequal(ANS1,ANS2)
